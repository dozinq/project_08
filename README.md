# ğŸ“Œ My Eighth Project ğŸ“‹

---

##### - Outline : 2022ë…„ 4ì›” 22ì¼, ì—¬ëŸë²ˆì§¸ ê´€í†µ í”„ë¡œì íŠ¸ë¥¼ ìˆ˜í–‰í•˜ì˜€ë‹¤. ì˜¤ëŠ˜ í”„ë¡œì íŠ¸ë¥¼ í•˜ë©´ì„œ ëŠë‚€ ì ë¶€í„° í•œ ì¤„ë¡œ ê°„ë‹¨í•˜ê²Œ ë§í•˜ìë©´, 'ë‚´ê°€ í”¼í•´ê°€ ë˜ì§€ ì•Šìœ¼ë ¤ë©´ í‰ì†Œì— ë‚¨ë“¤ë³´ë‹¤ ë” ì—´ì‹¬íˆ í•´ì•¼ í•œë‹¤.' ì˜€ë‹¤. ì‚¬ì‹¤ ì˜¤ëŠ˜ ìˆ˜í–‰í•˜ë©´ì„œ ì´ë²ˆ ì£¼ì— ë°°ì› ë˜ DRFë¥¼ ì‘ìš©í•˜ë ¤ë‹¤ ë³´ë‹ˆ ë³µìŠµì´ ì œëŒ€ë¡œ ë˜ì§€ ì•Šì•˜ë˜ ë‚˜ëŠ” í—¤ë§¬ ìˆ˜ ë°–ì— ì—†ì—ˆë‹¤. ë§¤ìš° ì²˜ì°¸í–ˆì§€ë§Œ, ë‚´ ìì‹ ì´ ë¶ˆìŒí•˜ì§„ ì•Šì•˜ë‹¤. ê·¸ì € ê·¸ ì „ì— ë…¸ë ¥ì„ ì•ˆí–ˆê¸° ë•Œë¬¸ì— ì–»ì„ ìˆ˜ ìˆëŠ” ë‹¹ì—°í•œ ê²°ê³¼ì˜€ë‹¤. í˜„ì‹¤ì„ ë°›ì•„ë“¤ì´ë˜, ì•ìœ¼ë¡œ ë” ì—´ì‹¬íˆ ê³µë¶€ë¥¼ í•´ì•¼ê² ë‹¤ëŠ” ìƒê°ì´ í”„ë¡œì íŠ¸ ì¤‘ì— ê³„ì† ë“¤ì—ˆë‹¤. ê·¸ë¦¬ê³  ì´ READMEë¥¼ ì‘ì„±í•˜ê³  ìˆëŠ” ì§€ê¸ˆ, ì‚¬ì‹¤ ëª‡ëª‡ì˜ ê¸°ëŠ¥ì´ ì œëŒ€ë¡œ ìˆ˜í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤. ì´ ì ì€ ë°˜ë“œì‹œ ì£¼ë§ì— ê³ ì¹  ìˆ˜ ìˆë„ë¡ í•  ê²ƒì´ë‹¤. ì˜¤ëŠ˜ì€ ê°™ì€ ë°˜ì˜ 'ë°±ê²½ì›' í•™ìš°ì™€ í˜ì–´ë¥¼ ì´ë£¨ì–´ í”„ë¡œì íŠ¸ë¥¼ ìˆ˜í–‰í•˜ì˜€ê³ , ê·¸ ê³¼ì • ì†ì—ì„œ ëŠë‚€ ì ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì„œìˆ í•´ ë³´ê³ ì í•œë‹¤. ë˜í•œ ê°œì„ í•´ì•¼ í•˜ëŠ” ë¶€ë¶„ë„ ì‘ì„±í•´ë³´ë ¤ í•œë‹¤.

---

<br>


# **< Title : "DB ì„¤ê³„ë¥¼ í™œìš©í•œ REST API ì„¤ê³„" >**

*(This project was carried out in **Python 3.9.9 and Django 3.2.12 environment .**)*

- *ìš”êµ¬ì‚¬í•­ : ëª¨ë¸ ê°„ì˜ ê´€ê³„ ì„¤ì • í›„ Actorë¥¼ í†µí•´ ë°°ìš° ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê³ , Movieë¥¼ í†µí•´ ì˜í™” ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê³ , Reviewë¥¼ í†µí•´ ë¦¬ë·° ë°ì´í„°ë¥¼ ì¡°íšŒ, ìƒì„±, ìˆ˜ì •, ì‚­ì œë¥¼ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„ì‹œì¼œì•¼ í•œë‹¤.*

---

*(í”„ë¡œì íŠ¸ íŒŒì¼ì˜ settings.py, urls.pyì™€ base.html ë“±ì˜ ê¸°ë³¸ ì„¤ì •ì€ ì œì™¸í•˜ê³  , ì•± íŒŒì¼ì— ê´€í•´ì„œë§Œ ì‘ì„±í•©ë‹ˆë‹¤.)*

<br>

- **movies/urls.py**

  ```python
  from django.urls import path
  from . import views
  
  urlpatterns = [
      path('actors/', views.actor_list),
      path('actors/<int:actor_pk>/', views.actor_detail),
      path('movies/', views.movie_list),
      path('movies/<int:movie_pk>/', views.movie_detail),
      path('movies/<int:movie_pk>/reviews/', views.create_review),
      path('reviews/', views.review_list),
      path('reviews/<int:review_pk>/', views.review_detail),
  ]
  ```

  : ëª…ì„¸ì„œì— ì í˜€ìˆëŠ” ëŒ€ë¡œ urlì´ ì…ë ¥ëœë‹¤ë©´ ì•Œë§ì€ view í•¨ìˆ˜ì— ê°ˆ ìˆ˜ ìˆë„ë¡ í•´ì£¼ì—ˆë‹¤. ì›Œë‚™ ë§ì´ í•´ ë³¸ ì‘ì—…ì´ë‹¤ë³´ë‹ˆ ë§ì´ ìˆ˜ì›”í•˜ê²Œ ì§„í–‰í•  ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ë‹¤.

<br>

- **movies/views.py**

  ```python
  from rest_framework.decorators import api_view
  from rest_framework import status
  from rest_framework.response import Response
  
  from django.shortcuts import get_list_or_404, get_object_or_404
  
  from movies.serializers import(
      ActorListSerializer, MovieListSerializer, ReviewListSerializer,
      MovieSerializer, ReviewSerializer, ActorSerializer
  )
  from .models import Actor, Movie, Review
  
  
  @api_view(['GET'])
  def actor_list(request):
      actors = get_list_or_404(Actor)
      serializer = ActorListSerializer(actors, many=True)
      return Response(serializer.data)
  
  @api_view(['GET'])
  def actor_detail(request, actor_pk):
      actor = get_object_or_404(Actor, pk=actor_pk)
      serializer = ActorSerializer(actor)
      return Response(serializer.data)
  
  @api_view(['GET'])
  def movie_list(request):
      movies = get_list_or_404(Movie)
      serializer = MovieListSerializer(movies, many=True)
      return Response(serializer.data)
  
  @api_view(['GET'])
  def movie_detail(request, movie_pk):
      movie = get_object_or_404(Actor, pk=movie_pk)
      serializer = MovieSerializer(movie)
      return Response(serializer.data)
  
  @api_view(['GET'])
  def review_list(request):
      reviews = get_list_or_404(Review)
      serializer = ReviewListSerializer(reviews, many=True)
      return Response(serializer.data)
  
  @api_view(['GET', 'PUT', 'DELETE'])
  def review_detail(request, review_pk):
      review = get_object_or_404(Review, pk=review_pk)
  
      if request.method == 'GET':
          serializer = ReviewSerializer(review)
          return Response(serializer.data)
      if request.method == 'PUT':
          serializer = ReviewSerializer(review, request.data)
          if serializer.is_valid(raise_exception=True):
              serializer.save()
              return Response(serializer.data)
      if request.method == 'DELETE':
          review.delete()
          data = {
              'delete': f'{review_pk}ë²ˆ ë¦¬ë·°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.',
          }
          return Response(data, status=status.HTTP_204_NO_CONTENT)
  
  @api_view(['POST'])
  def create_review(request, movie_pk):
      movie = get_object_or_404(Movie, pk=movie_pk)
      serializer = ReviewSerializer(data=request.data)
      if serializer.is_valid(raise_exception=True):
          serializer.save(movie=movie)
          return Response(serializer.data, status=status.HTTP_201_CREATED)
  ```

  : ì‚¬ì‹¤ ì´ë²ˆ ì£¼ì— ë°°ìš´ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ í™œìš©í•  ìˆ˜ ìˆì—ˆë˜ view í•¨ìˆ˜ êµ¬í˜„ì´ì—ˆìœ¼ë©°, ì´ ë¶€ë¶„ê³¼ ì´í›„ì— ì‘ì„±í•  serializers.py ë¶€ë¶„ìœ¼ë¡œ ë§ì´ ê³ ë¯¼í•˜ì˜€ë˜ ê²ƒ ê°™ë‹¤. ê·¸ë˜ë„ ì´ì „ ìˆ˜ì—… ë‚´ìš©ì„ ì°¸ê³ í•˜ë©° ìˆ˜ì›”í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆì—ˆìœ¼ë©°, ê° ìš”êµ¬ì‚¬í•­ì— ë§ê²Œ ì¶œë ¥í•  ìˆ˜ ìˆì–´ì•¼ í–ˆëŠ”ë°, ê·¸ ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” ì´í›„ì— ë§ì€ í•™ìŠµì´ í•„ìš”í•  ê²ƒì´ë¼ê³  íŒë‹¨ë˜ì—ˆë‹¤.

<br>

- **movies/models.py**

  ```python
  from django.db import models
  
  class Actor(models.Model):
      name = models.CharField(max_length=100)
  
  class Movie(models.Model):
      title = models.CharField(max_length=100)
      overview = models.TextField()
      release_date = models.DateTimeField()
      poster_path = models.TextField()
      actors = models.ManyToManyField(Actor, related_name='movies_actor')
  
  class Review(models.Model):
      title = models.CharField(max_length=100)
      content = models.TextField()
      movie = models.ForeignKey(Movie, on_delete=models.CASCADE)
  ```

  : ì£¼ì–´ì§„ ì¡°ê±´ì— ë§ê²Œ models.pyë¥¼ êµ¬ì„±í•´ ì£¼ì—ˆë‹¤. ì´ ë¶€ë¶„ ë˜í•œ ëª…ì„¸ì„œì— ë‚˜ì™€ìˆëŠ” ëŒ€ë¡œ ì§„í–‰í•˜ë‹¤ ë³´ë‹ˆ ìˆ˜ì›”í•˜ì˜€ëŠ”ë°, ManyToManyFieldë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì— ìˆì–´ì„œ ë§ì€ ìƒê°ì„ í•´ì•¼ë§Œ í•˜ì˜€ë‹¤. ë” ìì—°ìŠ¤ëŸ½ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ ë…¸ë ¥í•  ê²ƒì´ë‹¤.

- **movies/serializers.py**

  ```python
  from asyncore import read
  from rest_framework import serializers
  from .models import Actor, Movie, Review
  
  class ActorListSerializer(serializers.ModelSerializer):
  
      class Meta:
          model = Actor
          fields = '__all__'
  
  class MovieListSerializer(serializers.ModelSerializer):
  
      class Meta:
          model = Movie
          fields = ('title', 'overview',)
  
  class ReviewListSerializer(serializers.ModelSerializer):
  
      class Meta:
          model = Review
          fields = ('title', 'content',)
  
  class ReviewSerializer(serializers.ModelSerializer):
  
      class Meta:
          model = Review
          fields = ('id', 'title', 'content',)
  
  class MovieSerializer(serializers.ModelSerializer):
      class ActorSerializer(serializers.ModelSerializer):
  
          class Meta:
              model = Actor
              fields = ('title',)
  
      actors = ActorSerializer(many=True, read_only=True)
      review_set = ReviewListSerializer(many=True, read_only=True)
  
      class Meta:
          model = Movie
          fields = '__all__'
  ```

  : ì´ë²ˆ ê´€í†µ í”„ë¡œì íŠ¸ì˜ í•µì‹¬ ë¶€ë¶„ì´ì—ˆë˜ serializerì˜ êµ¬í˜„ì´ì—ˆë‹¤. ìˆ˜ì—…ì„ ë“¤ì„ ë•ŒëŠ” ê½¤ë‚˜ ìˆ˜ì›”í•˜ì˜€ë˜ ê²ƒ ê°™ì€ë°, ë§ì´ í˜ë“¤ì—ˆë˜ ê²ƒì´ ì‚¬ì‹¤ì´ë‹¤. ë˜í•œ ì´ ë¶€ë¶„ì„ ì•ìœ¼ë¡œ ì˜ ê°œì„ í•´ ì¤€ë‹¤ë©´ ì›í•˜ëŠ” ë‚´ìš©ë§Œì„ ì¶œë ¥í•˜ê³  Clientì—ê²Œ ì‘ë‹µì‹œí‚¬ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ëŠê¼ˆê³ , ì¤‘ìš”ì„±ì„ ê¹¨ë‹¬ì•˜ë‹¤. ì´ë²ˆ ì£¼ë§ ë™ì•ˆ ë§ì´ ì‹œë„í•´ë³´ë©° ëŠ¥ë ¥ì„ ìŒ“ì•„ê°€ë ¤ í•œë‹¤.

<br>

---

## âœAfter finishing..

>   ã€€ã€€ã€€ã€€ã€€ë²Œì¨ ì—¬ëŸë²ˆì§¸ ê´€í†µ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ì˜€ë‹¤. ë°°ìš°ëŠ” ë‚´ìš©ì´ ì •ë§ ë§ì€ ê²ƒë„ ì‚¬ì‹¤ì´ì§€ë§Œ, ê·¸ê²ƒì„ ë‚´ ê²ƒìœ¼ë¡œ ì œëŒ€ë¡œ ë§Œë“œë ¤ê³  ë…¸ë ¥í•˜ëŠ” ë°ë„ ê·¸ ë…¸ë ¥ì´ ë¶€ì¡±í•œ ê²ƒë„ ì‚¬ì‹¤ì´ë‹¤. ìµœì¢… í”„ë¡œì íŠ¸ë„ ì–¼ë§ˆ ë‚¨ì§€ ì•Šì•˜ëŠ”ë°, ë§ì´ ê°œì„ í•´ ë‚˜ì•„ê°€ê³ ì í•œë‹¤. ì•ìœ¼ë¡œ ëˆ„êµ°ê°€ì—ê²Œ ë„ì›€ì´ ë˜ê³ ë§Œ ì‹¶ë‹¤.
>
>   ã€€ã€€ã€€ã€€â€‹	ì˜¤ëŠ˜ í”„ë¡œì íŠ¸ê°€ ëë‚˜ìë§ˆì êµìˆ˜ë‹˜ê»˜ì„œ ë” ì´ìƒ ìˆ˜ì—…ì„ ëª»í•œë‹¤ê³  í•˜ì…¨ë‹¤. ê°™ì€ ë°˜ í•™ìš°ë“¤ë„ ë‚˜ì™€ ê°™ì´ ë§ì´ ìŠ¬í¼í•˜ì˜€ê³ , ì•„ì‰¬ìš´ ë§ˆìŒì´ ì•„ì§ë„ ê°€ì‹œì§ˆ ì•ŠëŠ”ë‹¤. ìˆ˜ì—…ì´ ëë‚˜ê³  READMEíŒŒì¼ì„ ì‘ì„±í•´ì•¼ í–ˆëŠ”ë°, ì•„ë¬´ê²ƒë„ í•˜ê¸° ì‹«ë‹¤ëŠ” ê¸°ë¶„ì„ ì²˜ìŒ ëŠê»´ë³¸ ê²ƒ ê°™ë‹¤. ë¯¸ë£¨ê³  ë¯¸ë£¨ë‹¤ê°€ ìì •ì´ ë˜ê¸° ì „ì— ê¸‰í•˜ê²Œ ì‘ì„±í•˜ê¸´ í•˜ì˜€ëŠ”ë°, ì •ë§ ì—‰ë§ì´ë‹¤. ì•ìœ¼ë¡œ ì”©ì”©í•˜ê²Œ ë‚´ í•  ì¼ í•˜ë‹¤ë³´ë©´ ì–¸ì  ê°„ ë§Œë‚  ìˆ˜ ìˆì„ê±°ë¼ ìƒê°í•œë‹¤. ë‚´ê°€ ë‹¹ì¥ í•´ì•¼ í•  ì¼ì— ì§‘ì¤‘í•˜ë‹¤ê°€ ë©€ì§€ ì•Šì€ ì‹œê°„ì´ ì§€ë‚˜ê³  ê¼­ ì¢‹ì€ ëª¨ìŠµìœ¼ë¡œ ë§ˆì£¼í•˜ê³  ì‹¶ë‹¤.
>
>   ã€€ã€€ã€€ã€€â€‹	JUSTIN ë„ˆë¬´ ê°ì‚¬í–ˆìŠµë‹ˆë‹¤. ê°™ì´ ì‹œê°„ì„ ë³´ë‚¼ ìˆ˜ ìˆì—ˆë˜ ê²ƒì€, ì œ ì¸ìƒì— ëª‡ ì—†ì„ í–‰ìš´ ì¤‘ í•˜ë‚˜ì¼ ê²ƒì…ë‹ˆë‹¤. ì–´ë””ì— ê³„ì…”ë„ í•­ìƒ ê±´ê°•í•˜ì…¨ìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.